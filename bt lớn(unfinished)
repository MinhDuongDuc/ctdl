#include<iostream>
#include<string>
using namespace std;

struct Node
{
	int maSach;
	string tenSach;
	string tenNXB;
	Node * left;
	Node * right;
	Node(int ma, string ten, string NXB,Node * l,Node * r)
	{
		maSach = ma;
		tenSach = ten;
		tenNXB = NXB;
		left = l;
		right = r;
	}
};
class ThuVien
{
public:
	ThuVien()
	{
		root = NULL; //ban dau ham rong
	}


	~ThuVien()
	{
		makeEmpty(); // goi hsm make empty de lam cay rong
	}


	//Kiem tra cay rong
	bool isEmpty()
	{
		return (root == NULL);
	}

	//Xoa rong cay
	void makeEmpty() 	//Ham xoa rong cay
	{
		makeEmpty(root);//Goi ham private tro giup -> Lam rong cay 
	}

	//Chen mot sach moi vao cay
	void insert(int maSach, string tenSach,string tenNXB)
	{
		insert(maSach, tenSach,tenNXB, root);

	}

	//Tim sinh vien theo maSach, Tra ve con tro toi nut chua sach tim duoc, hoac tra ve NULL neu khong tim duoc.
	Node * search(int maSach)
	{
		return search(maSach, root);
	}
private:
	Node * root;

	void makeEmpty(Node * & t)
	{
		if (t == NULL)
			return;
		makeEmpty(t->left); // xoa rong ben trai
		makeEmpty(t->right); //(cay con phai)  xoa rong ben phai
		delete t; // Xoa Goc 
		t = NULL; // Khi do T rong nen t =NULL

	}

	//Chen mot sinh vien moi vao cay co goc duoc tro boi t
	void insert(int maSach, string tenSach,string tenNXB, Node * & t)
	{
		if (t == NULL)
			t = new Node(maSach, tenSach,tenNXB, NULL, NULL);
		else if (maSach < t->maSach)
			insert(maSach, tenSach,tenNXB, t->left); // chen sang ben phai
		else if (maSach > t->maSach)
			insert(maSach, tenSach,tenNXB, t->right);
		else
			; // maSach da ton tai thi khong chen
	}

	//Tim sinh vien theo maSach trong cay co goc duoc tro tra ve NULL neu khong tim duoc.
	Node * search(int maSach, Node * t)
	{
		if (t == NULL)
			return NULL;
		if (maSach < t->maSach)
			return search(maSach, t->left); 		// tim ben trai 
		else if (maSach > t->maSach)
			return search(maSach, t->right);				// tim ben phai
		else
			return t; // Khi da tim thay roi thi tra con tro ve t

	}

};



int main()
{
	ThuVien tv1;
	Node * N;
	
	string ten,nxb;
	int ma,tim;

	int luachon1, dem = 0;
	cout << "=====================================" << endl;
	cout << "                 MENU             " << endl;
	cout << "=====================================" << endl;
	cout << "1.Nhap thong tin sach moi" << endl;
	cout << "2.Tim thong tin sach dang co." << endl;
	cout << "3.Xoa thong tin sach." << endl;
	cout << "4.Chinh sua thong tin sach." << endl;
	cout << "5.Thoat" << endl;

	do
	{
		cout << "Nhap lua chon: ";cin >> luachon1;
		switch (luachon1)
		{
		case 1:
			cout << "Nhap ten sach: ";cin>> ten;
			cout << "Nhap ma sach: ";cin >> ma;
			cout << "Nhap ten NXB: ";cin>> nxb;
			tv1.insert(ma, ten, nxb);
			dem++;
			break;
		case 2:
		{
			cout << "Nhap ma sach can tim: ";cin >> tim;
			if (ma == tim)
				N=tv1.search(tim);
			
			if (N != NULL)
			{
				cout << "Ten sach: " << N->tenSach<< endl;
				cout << "Ma sach: " << N->maSach << endl;
				cout << "Ten NxB: " << N->tenNXB << endl;
			}
			else cout << "Ma sach vua nhap khong ton tai.";
		}
			break;
		case 3:
			
			break;
		case 4:

			break;
		case 5:

			break;
		default:
			break;
		}
	} while (luachon1 != 5);

	system("pause");
	return 0;
}
